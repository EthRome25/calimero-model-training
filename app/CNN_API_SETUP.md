# CNN API Integration Setup

This application now integrates with the CNN Network PoC Brain Tumor MRI Classifier API for AI-powered analysis of brain MRI scans.

## Environment Configuration

To configure the CNN API endpoint, create a `.env` file in the app directory with the following content:

```bash
# CNN Network PoC API Configuration
VITE_CNN_API_URL=http://localhost:8000
```

### Default Configuration

- **Default URL**: `http://localhost:8000`
- **Environment Variable**: `VITE_CNN_API_URL`

## Features

### Automatic AI Analysis

- When brain MRI scans are uploaded, the system automatically sends them to the CNN API for analysis
- Only brain MRI scans are analyzed (other scan types are uploaded normally without AI analysis)
- Results are displayed in a dedicated section below the upload form

### Prediction Results Display

- **Predicted Diagnosis**: Shows the most likely brain tumor type
- **Confidence Score**: Displays the confidence percentage for the prediction
- **Probability Breakdown**: Visual bar chart showing probabilities for all tumor types:
  - Glioma
  - Meningioma
  - No Tumor
  - Pituitary
- **Visualization**: Shows the analysis plot generated by the CNN model
- **Medical Disclaimer**: Includes appropriate medical disclaimers

### Error Handling

- Graceful handling of API connection issues
- Timeout protection (30 seconds for predictions)
- User-friendly error messages
- Fallback behavior when CNN API is unavailable

## API Endpoints Used

- `GET /` - Health check
- `POST /predict` - Brain tumor prediction (multipart/form-data with image file)

## Requirements

1. **CNN API Server**: The CNN Network PoC server must be running and accessible
2. **Brain MRI Scans**: AI analysis is only performed on brain MRI scans
3. **Image Format**: Supports JPEG/PNG images as per CNN API requirements

## Usage

1. Upload brain MRI scans using the scan upload form
2. Select "MRI" as scan type and "brain" as body part
3. Submit the form
4. The system will:
   - Upload scans to the Calimero network
   - Automatically analyze brain MRI scans with AI
   - Display prediction results in a dedicated section

## Troubleshooting

### CNN API Not Available

- Check if the CNN API server is running
- Verify the `VITE_CNN_API_URL` environment variable
- Check network connectivity to the API endpoint

### Analysis Fails

- Ensure uploaded files are valid medical images (JPEG/PNG)
- Check that the CNN API server is responding to health checks
- Review browser console for detailed error messages

### No Analysis Results

- Verify that uploaded scans are brain MRI scans
- Check that the scan type is set to "MRI" and body part to "brain"
- Ensure the CNN API is accessible and responding
